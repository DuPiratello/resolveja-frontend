<div class="report-container">
  <div class="report-header">
    <div class="header-icon">ğŸ“</div>
    <h1 class="report-title">Nova DenÃºncia</h1>
    <p class="report-subtitle">Registre um problema em sua cidade e ajude a melhorar nossa comunidade</p>
  </div>
  
  <form class="report-form" (ngSubmit)="submitDenuncia()">
    <!-- TÃ­tulo da DenÃºncia -->
    <div class="form-group">
      <label for="titulo" class="form-label">
        <span class="label-icon">ğŸ“‹</span>
        TÃ­tulo da DenÃºncia
        <span class="required">*</span>
      </label>
      <input 
        type="text" 
        id="titulo" 
        name="titulo" 
        [(ngModel)]="denuncia.titulo" 
        required
        placeholder="Ex: Buraco na rua principal"
        class="form-input"
      >
    </div>
    
    <!-- Tipo de Problema -->
    <div class="form-group">
      <label for="tipo" class="form-label">
        <span class="label-icon">ğŸ·ï¸</span>
        Tipo de Problema
        <span class="required">*</span>
      </label>
      <select 
        id="tipo" 
        name="tipo" 
        [(ngModel)]="denuncia.tipo" 
        required
        class="form-select"
      >
        <option value="" disabled selected>Selecione um tipo</option>
        <option value="buraco">ğŸ•³ï¸ Buraco na Via</option>
        <option value="iluminacao">ğŸ’¡ IluminaÃ§Ã£o PÃºblica</option>
        <option value="lixo">ğŸ—‘ï¸ Coleta de Lixo</option>
      </select>
    </div>

    <!-- DescriÃ§Ã£o -->
    <div class="form-group">
      <label for="descricao" class="form-label">
        <span class="label-icon">ğŸ“</span>
        DescriÃ§Ã£o Detalhada
      </label>
      <textarea 
        id="descricao" 
        name="descricao" 
        [(ngModel)]="denuncia.descricao" 
        placeholder="Descreva o problema detalhadamente. Quanto mais informaÃ§Ãµes, melhor serÃ¡ o atendimento."
        class="form-textarea"
        rows="4"
      ></textarea>
    </div>
    
    <!-- Upload de Imagem -->
    <div class="form-group">
      <label for="imagem" class="form-label">
        <span class="label-icon">ğŸ“·</span>
        Adicionar Imagem
        <span class="optional">(Opcional)</span>
      </label>
      
      <div class="file-upload-container">
        <input 
          type="file" 
          id="imagem" 
          name="imagem" 
          (change)="onFileSelected($event)"
          accept="image/*"
          class="file-input"
        >
        <label for="imagem" class="file-upload-label">
          <span class="upload-icon">ğŸ“</span>
          <span class="upload-text">Clique para selecionar uma imagem</span>
          <span class="upload-hint">PNG, JPG atÃ© 5MB</span>
        </label>
      </div>
      
      <div class="image-preview-container" [class.show]="imagePreview">
        <div class="image-preview">
          <img [src]="imagePreview" alt="PrÃ©-visualizaÃ§Ã£o da imagem" class="preview-image">
          <button type="button" class="remove-btn" (click)="removeImage()">
            <span class="remove-icon">âœ•</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Mapa -->
    <div class="form-group">
      <label class="form-label">
        <span class="label-icon">ğŸ“</span>
        LocalizaÃ§Ã£o do Problema
        <span class="required">*</span>
      </label>
      <div class="map-container">
        <div class="map-header">
          <h3 class="map-title">Marque o local exato do problema</h3>
          <p class="map-description">Clique no mapa para definir a localizaÃ§Ã£o precisa</p>
        </div>
        <div class="map-wrapper">
          <app-mapa 
            (localConfirmadoEvent)="atualizarCoordenadas($event)"
            (localResetEvent)="resetLocalConfirmado()">
          </app-mapa>
        </div>
        <div class="location-status" [class.confirmed]="localConfirmado">
          <span class="status-icon">{{ localConfirmado ? 'âœ…' : 'ğŸ“' }}</span>
          <span class="status-text">
            {{ localConfirmado ? 'LocalizaÃ§Ã£o confirmada' : 'Clique no mapa para confirmar a localizaÃ§Ã£o' }}
          </span>
        </div>
      </div>
    </div>

    <!-- BotÃ£o de Envio -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="submit-btn" 
        [disabled]="!denuncia.titulo || !denuncia.tipo || !localConfirmado"
        [class.disabled]="!denuncia.titulo || !denuncia.tipo || !localConfirmado"
      >
        <span class="btn-icon">ğŸš€</span>
        <span class="btn-text">Enviar DenÃºncia</span>
      </button>
      
      <div class="form-requirements">
        <p class="requirements-title">Campos obrigatÃ³rios:</p>
        <div class="requirements-list">
          <div class="requirement-item" [class.completed]="denuncia.titulo">
            <span class="requirement-icon">{{ denuncia.titulo ? 'âœ…' : 'â­•' }}</span>
            <span class="requirement-text">TÃ­tulo da denÃºncia</span>
          </div>
          <div class="requirement-item" [class.completed]="denuncia.tipo">
            <span class="requirement-icon">{{ denuncia.tipo ? 'âœ…' : 'â­•' }}</span>
            <span class="requirement-text">Tipo de problema</span>
          </div>
          <div class="requirement-item" [class.completed]="localConfirmado">
            <span class="requirement-icon">{{ localConfirmado ? 'âœ…' : 'â­•' }}</span>
            <span class="requirement-text">LocalizaÃ§Ã£o no mapa</span>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
